<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Reporte de Diagnóstico - FerreyDoc</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='reporte.css') }}">
</head>

<body>

    <!-- ENCABEZADO SUPERIOR -->
    <header class="header">
        <div class="logo-block">
            <img src="{{ url_for('static', filename='robot_ferreydoc.png') }}" class="robot-logo">
            <div class="title-text">
                <h1>Reporte de Diagnóstico</h1>
                <h2>FerreyDoc — Asistente Técnico Inteligente</h2>
            </div>
        </div>

        <div class="info-box">
            <p><strong>Modelo:</strong> {{ modelo }}</p>
            <p><strong>Serie:</strong> {{ serie }}</p>
            <p><strong>Fecha del reporte:</strong> {{ now }}</p>
        </div>
    </header>

    <hr class="divider">

    <!-- ----------------------- -->
    <!--  RESUMEN GENERAL -->
    <!-- ----------------------- -->
    <section>
        <h2 class="section-title">Resumen General</h2>
        <p class="content-text">
            Este documento contiene el análisis solicitado por el usuario con base en la base de datos técnica
            de Ferreyros/Caterpillar. Incluye la interpretación de <strong>códigos de falla (CID/FMI)</strong>
            y <strong>eventos (EID/Level)</strong> correspondientes al modelo y prefijo de serie especificado.
        </p>
    </section>

    <!-- ----------------------- -->
    <!-- CÓDIGOS DE FALLA -->
    <!-- ----------------------- -->
    {% if codigos and codigos|length > 0 %}
    <section>
        <h2 class="section-title">Códigos de Falla (CID / FMI)</h2>

        {% for c in codigos %}
        <div class="item-block">
            <p><strong>Código ingresado:</strong> {{ c.raw }}</p>
            <p><strong>CID:</strong> {{ c.cid }} — <strong>FMI:</strong> {{ c.fmi }}</p>
            <p><strong>Descripción:</strong><br>{{ c.descripcion }}</p>
            <p><strong>Causas:</strong><br>{{ c.causas }}</p>

            {% if c.url %}
            <p><strong>Más información:</strong> <a href="{{ c.url }}">{{ c.url }}</a></p>
            {% endif %}
        </div>
        {% endfor %}
    </section>
    {% endif %}

    <!-- ----------------------- -->
    <!-- EVENTOS -->
    <!-- ----------------------- -->
    {% if eventos and eventos|length > 0 %}
    <section>
        <h2 class="section-title">Eventos (EID / Level)</h2>

        {% for e in eventos %}
        <div class="item-block">
            <p><strong>Evento ingresado:</strong> {{ e.raw }}</p>
            <p><strong>EID:</strong> {{ e.eid }} — <strong>Nivel:</strong> {{ e.level }}</p>
            <p><strong>Descripción:</strong><br>{{ e.descripcion }}</p>

            {% if e.url %}
            <p><strong>Más información:</strong> <a href="{{ e.url }}">{{ e.url }}</a></p>
            {% endif %}
        </div>
        {% endfor %}
    </section>
    {% endif %}

    <!-- ----------------------- -->
    <!-- CONTACTOS -->
    <!-- ----------------------- -->
    <section>
        <h2 class="section-title">Contactos de Soporte Técnico</h2>

        <table class="table-contactos">
            <tr>
                <th>Zona</th>
                <th>Correo</th>
                <th>Teléfono</th>
            </tr>

            {% for c in contactos %}
            <tr>
                <td>{{ c.zona }}</td>
                <td>{{ c.correo }}</td>
                <td>{{ c.telefono }}</td>
            </tr>
            {% endfor %}
        </table>
    </section>

    <!-- ----------------------- -->
    <!-- PIE DE PÁGINA -->
    <!-- ----------------------- -->
    <footer class="footer">
        <p>FerreyDoc — Sistema de Diagnóstico Inteligente</p>
        <p>Generado automáticamente por el asistente.</p>
    </footer>

</body>
</html>

